#!/bin/bash
# Wrapper script for notify_telegram.py to be called from Claude Code hooks
# Runs notification in background to minimize hook execution time

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR"

# Run everything in background to return immediately
(
    echo "[$(date)] Hook triggered from TMUX_PANE=$TMUX_PANE" >> logs/hook.log
    source venv/bin/activate
    python notify_telegram.py >> logs/hook.log 2>&1
) &

# Exit immediately - don't wait for background process
exit 0
